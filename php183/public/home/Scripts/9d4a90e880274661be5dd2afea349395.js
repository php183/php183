fml.define("page/user/cookieHref",[],function(e,o,t){var c=document.cookie.split("__mgjref=")[1]||"",i=decodeURIComponent(c.split(";")[0])||"",m="http://www.meilishuo.com";i&&!i.match(/\/user\/|\/account\//)&&(m=i),t.exports=m});;fml.define("page/user/displayError",[],function(r,e,i){function o(r){""==r?n.hide().html(""):n.html(r).show()}var n=$("#errorTip");i.exports=o});;fml.define("page/user/ajaxFun",[],function(a,e,n){function t(a,e,n,t,r){$.ajax({type:a,dataType:e,data:n,url:t,success:function(a){r&&"function"==typeof r&&r(a)},error:function(a){alert("请求错误，请稍后再试!")},complete:function(){u.removeClass("submit-gray").val(o)},beforeSend:function(){u.addClass("submit-gray").val("提交中...")}})}var u=$("#submit"),o=u.val();n.exports=t});;fml.define("component/shareTmp",["core/etic"],function(e,c,t){var r=e("core/etic");t.exports=function(e,c){c=c||Object;try{var t=r(e,c)}catch(n){fml.debug(n)}return t}});;fml.define("core/etic",[],function(e,n,t){function c(e,n,t){if(t&&checkTemplate(e,n),!o[e]){var c=document.getElementById(e).innerHTML;c=c.replace(/[\r\t\n]/g," ").split("<?").join("\t").replace(/((^|\?>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)\?>/g,"',$1,'").split("\t").join("');").split("?>").join(";p.push('").split("\r").join("\\'");try{o[e]=new Function("","var p=[];p.push('"+c+"');return p.join('');")}catch(r){if(console){console.log(r);var l=c.replace(/^[ ]*\'\)|p.push\(\'[ ]*\'\)|p.push\(\'/g,"").replace(/^[ ]*;|;[ ]*$/g,"");console.log(r.message+"   :   "+l);var p=document.createElement("script");p.innerHTML=l;try{new Function("",l)}catch(r){}}}}var i=o[e];if(!n)return i;try{return i.apply(n)}catch(r){console&&(console.log(r),console.log(n))}}var o={};t.exports=c});;fml.define("page/user/register-step3",["component/shareTmp","page/user/ajaxFun","page/user/displayError","page/user/cookieHref"],function(e,n,a){function s(e,n){""==e.replace(/^\s*|\s*$/g,"")?i("请输入昵称"):n&&"function"==typeof n&&n()}function o(){var e={uname:p.val()},n="";t("post","json",e,"/user/aj/checkuname",function(e){var a=e&&e.status||{},s=e&&e.result||{},o=a.code,t=s.status,c=s.msg,m=a.msg;if(1001==o){if(0==t)return void(l&&(l=!1,r(p.val())));i(c),n=u("nameListTpl",{list:s.recommend||[]}),f.empty().append(n)}else i(m)})}function r(e){t("post","json",{uname:e},"/user/aj/updateBaseUserInfo",function(e){var n=e&&e.status||{},a=n.code,s=n.msg;1001==a?location.href=c:i(s)})}var u=e("component/shareTmp"),t=e("page/user/ajaxFun"),i=e("page/user/displayError"),c=e("page/user/cookieHref"),p=$("#name"),f=$("#nameList"),m=$("#submit"),l=!1;p.on("focus",function(){i("")}).on("blur",function(){s(p.val(),o)}),m.on("click",function(){if(m.hasClass("submit-gray"))return void(l=!0);var e=p.val();s(e,function(){r(e)})})});;